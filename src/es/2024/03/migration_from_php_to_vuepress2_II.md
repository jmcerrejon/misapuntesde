---
title:  Como migr√© de PHP a Vuepress 2 (Parte II)
author: Jose Cerrejon
icon: fa-solid fa-code
date: 2024-03-02
prev: /
next: false
category:
  - DevOps
tags:
  - Developer
  - PHP
  - Vuepress
---
# Como migr√© de PHP a Vuepress 2 (Parte II)

![Alt](https://misapuntesde.com/images/2024/02/php_vue.jpg "Generated by OpenAI's DALL-E and modified later.")

Esta es la segunda parte de la serie de art√≠culos sobre c√≥mo ha sido la experiencia de migrar un blog hecho en _PHP + MySQL_, a uno est√°tico usando _Vuepress 2_. Leer√©is de la vieja estructura de c√≥digo y la tecnolog√≠a utilizada. ¬°Acomp√°√±ame!

- - -
## ¬øPor qu√© Vuepress?

![Vue logo](/images/2024/03/vuepress_logo.png "Vue logo")

_Vue_ es un framework para la creaci√≥n de interfaces de usuarios. A diferencia de otros frameworks monol√≠ticos, _Vue_ est√° dise√±ado desde cero para ser gradualmente adoptable. La core central **se centra solo en la capa de la vista**, y es f√°cil de integrar con otras bibliotecas y/o proyectos existentes.

_VuePress_ es un sitio est√°tico minimalista _Vue-powered_ **generado por _Evan You_, el creador de _Vue.js_.** Fue construido para dar soporte a las necesidades de documentaci√≥n de proyectos hecho con _Vue_. Por defecto, el tema generado viene optimizado para la documentaci√≥n t√©cnica. A d√≠a de hoy, es mantenido por la comunidad. Una pena porque la actividad no es muy viva en su desarrollo.

Debo confesar que eleg√≠ _Vitepress_ en primer lugar, pero tuve que cambiar porque no encontr√© una manera f√°cil de paginar un blog. Es mantenido por el equipo de _Vue_ y tambi√©n es perfectamente capaz de alimentar _SPA_.

Estoy seguro que has visitado alguna que otra documentaci√≥n hecha con una de estas tecnolog√≠as. Hay miles de sitios que utilizan _Vuepress_ y _Vitepress_ para crear documentaci√≥n y blogs entre otros.

Realmente _Vuepress 2_ no es la mejor opci√≥n para un blog si no eres un experto, porque no puedes encontrar demasiada ayuda en la comunidad. Quiz√°s me equivoque, pero esa es mi sensaci√≥n. De todas formas, yo tuve suficiente con la documentaci√≥n del _theme_ que uso.

## La web en PHP

![Old site structure](/images/2024/03/site_structure.png "Old site structure")

Una de las cosas que me gusta del sitio antiguo es que lo desarroll√© desde cero en cinco d√≠as. La versi√≥n con _Vuepress_ me llev√≥ alrededor de 2 semanas, incluso cuando utilic√© un _theme incre√≠ble_ con todas las caracter√≠sticas que necesitaba. La estructura del antiguo sitio es simple como se puede ver en la imagen de arriba. La tecnolog√≠a utilizada fue:

- **Frontend**: HTML, CSS, JavaScript, jQuery, Bootstrap 4, [raintpl3](https://github.com/feulf/raintpl3) como PHP template engine, y Google Fonts.
- **Backend**: PHP 5.5 y luego la adapt√© a 7.2.
- **Database**: MySQL 5.x.

Echemos un vistazo a los _include_ del archivo _index.php_:

```php title="index.php header"
<?php
  $interval_post = (isset($_REQUEST["n"]) && is_numeric($_REQUEST["n"]))? abs($_REQUEST["n"]):"0";
  $max_post_per_page=6;
  $page = "index.php";
  include_once("rain/inc/rain.tpl.class.php");
  $tpl = new RainTPL('tpl');
  include_once('includes/config.php');
  include_once('includes/common.php');
  include_once('includes/mysql.php');
  include_once('includes/markdown.php');
  ...
```

Creo que es f√°cil de entender. D√©jame explicarte:

* `rain.tpl.class.php` es la clase principal del motor de plantillas.
* `config.php` contiene la configuraci√≥n del sitio para soporte en varios idiomas y elementos de configuraci√≥n de navegaci√≥n (_Sobre m√≠, noticias_).
* `common.php` contiene una funci√≥n para manejar el corte de los mensajes para la p√°gina principal y algunas asignaciones de variables para el engine _tpl_.
* `mysql.php` contiene la clase _MySql_ para consultar y conectarse a la base de datos. Tiene las credenciales para conectarse a la base de datos (¬°Qu√© verg√ºenza! ü§¶‚Äç‚ôÇÔ∏è).
* `markdown.php` contiene la funci√≥n para analizar los archivos _markdown_ creados por _Michel Fortin_ [llamado php-markdown](https://github.com/michelf/php-markdown).

Despu√©s de todo lo que incluye, el c√≥digo contin√∫a conect√°ndose a _MySQL_, haciendo que los art√≠culos se muestren en la p√°gina principal, y finalmente, el motor de plantillas hace el resto con ```echo $tpl->draw('res_template');```, donde `res_template` es un archivo _.html_ con c√≥digo _PHP_ dentro de llaves {}. El engine _rain.tpl_ era muy simple y f√°cil de usar, y una buena opci√≥n para proyectos peque√±os, pero ahora est√° obsoleto. Aqu√≠ tienes un ejemplo del archivo `res_template.html`:

![some code inside res_template.html](/images/2024/03/code_res_template.png "Some code inside res_template.html")

Aqu√≠ concluyo la segunda parte de esta serie. En la siguiente, hablar√© sobre el proceso de construcci√≥n del blog usando _Vuepress 2_. As√≠ que si est√°s interesado... ¬°Sigue leyendo mi blog! :smiley:

